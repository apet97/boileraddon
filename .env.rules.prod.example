# Production profile (use for real customer traffic)
# Reference: addons/rules/README.md#configuration-profiles

ENV=prod
ADDON_PORT=8080
ADDON_BASE_URL=https://rules.example.com/rules
CLOCKIFY_API_BASE_URL=https://api.clockify.me/api

# Apply changes by default in prod.
RULES_APPLY_CHANGES=true
# Required range: 60s â€“ 86400s. Adjust to match upstream retry policy.
RULES_WEBHOOK_DEDUP_SECONDS=600

# JWT bootstrap (JWKS recommended). Failure to set these will prevent startup.
CLOCKIFY_JWT_JWKS_URI=https://clockify.example.com/.well-known/jwks.json
CLOCKIFY_JWT_EXPECT_ISS=clockify
CLOCKIFY_JWT_EXPECT_AUD=rules
# CLOCKIFY_JWT_LEEWAY_SECONDS=60
# CLOCKIFY_JWT_DEFAULT_KID=kid-2024

# Persistence (mandatory)
ENABLE_DB_TOKEN_STORE=true
DB_URL=jdbc:postgresql://prod-db:5432/clockify_addons
DB_USER=addons
DB_PASSWORD=replace-me
RULES_DB_URL=jdbc:postgresql://prod-db:5432/rules
RULES_DB_USERNAME=rules
RULES_DB_PASSWORD=replace-me

# Security / middleware
ADDON_FRAME_ANCESTORS='self' https://app.clockify.me
ADDON_RATE_LIMIT=25
ADDON_LIMIT_BY=workspace
ADDON_CORS_ORIGINS=https://app.clockify.me
ADDON_CORS_ALLOW_CREDENTIALS=true
ADDON_REQUEST_LOGGING=false

# Dev-only toggles intentionally omitted. Do NOT add:
#   CLOCKIFY_WORKSPACE_ID
#   CLOCKIFY_INSTALLATION_TOKEN
#   ADDON_SKIP_SIGNATURE_VERIFY
#   ADDON_ACCEPT_JWT_SIGNATURE
