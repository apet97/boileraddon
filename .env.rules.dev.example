# Development profile (load with `make dev-rules`)
# Reference: addons/rules/README.md#configuration-profiles

ENV=dev
ADDON_PORT=8080
ADDON_BASE_URL=http://localhost:8080/rules
CLOCKIFY_API_BASE_URL=https://api.clockify.me/api

# Stay in log-only mode while iterating on rules locally.
RULES_APPLY_CHANGES=false
# 60s–86400s allowed. 600s keeps duplicate detection realistic for local retries.
RULES_WEBHOOK_DEDUP_SECONDS=600

# Optional JWT bootstrap for iframe auth. Dev can skip entirely, but providing a PEM
# lets the WorkspaceContextFilter pre-populate workspace/user attributes.
# CLOCKIFY_JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----"
# CLOCKIFY_JWT_EXPECT_ISS=clockify
# CLOCKIFY_JWT_EXPECT_AUD=rules

# Persistence (local DB) — leave commented to use in-memory stores.
# ENABLE_DB_TOKEN_STORE=true
# DB_URL=jdbc:postgresql://localhost:5432/clockify_addons
# DB_USER=clockify_addon
# DB_PASSWORD=replace-me
# RULES_DB_URL=jdbc:postgresql://localhost:5432/clockify_rules
# RULES_DB_USERNAME=rules
# RULES_DB_PASSWORD=replace-me

# Dev-only helpers: preloads a workspace token and/or bypasses webhook signatures.
CLOCKIFY_WORKSPACE_ID=your-dev-workspace-id          # DEV ONLY
CLOCKIFY_INSTALLATION_TOKEN=your-installation-token  # DEV ONLY
ADDON_SKIP_SIGNATURE_VERIFY=true                     # DEV ONLY
# ADDON_ACCEPT_JWT_SIGNATURE=true                    # Accept developer JWT headers (ENV=dev only)

# Optional debugging flags
# ADDON_REQUEST_LOGGING=true
# ADDON_RATE_LIMIT=10
# ADDON_LIMIT_BY=workspace
