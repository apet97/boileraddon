## Rules add-on environment template
# For env-specific profiles see:
#   - .env.rules.dev.example
#   - .env.rules.staging.example
#   - .env.rules.prod.example

# Core server wiring
ADDON_PORT=8080
ADDON_BASE_URL=http://localhost:8080/rules
CLOCKIFY_API_BASE_URL=https://api.clockify.me/api
ENV=dev
RULES_APPLY_CHANGES=false
# 600 seconds (10 minutes). Valid range: 60sâ€“86400s; out-of-range values fail fast.
RULES_WEBHOOK_DEDUP_SECONDS=600

# Persistence (token store + rules store). Leave commented to use in-memory during local dev.
# ENABLE_DB_TOKEN_STORE=true
# DB_URL=jdbc:postgresql://localhost:5432/clockify_addons
# DB_USER=clockify_addon
# DB_PASSWORD=replace-me
# RULES_DB_URL=jdbc:postgresql://localhost:5432/clockify_rules
# RULES_DB_USERNAME=rules
# RULES_DB_PASSWORD=replace-me

# Security / JWT verification
# (Required in production) Configure one of the following key sources; startup fails without them when ENV != dev.
# CLOCKIFY_JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----"
# CLOCKIFY_JWT_PUBLIC_KEY_PEM="-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----"
# CLOCKIFY_JWT_JWKS_URI=https://clockify.example.com/.well-known/jwks.json
# CLOCKIFY_JWT_PUBLIC_KEY_MAP='{"key-2024":"-----BEGIN PUBLIC KEY-----\n...\n"}'
# CLOCKIFY_JWT_DEFAULT_KID=key-2024
CLOCKIFY_JWT_EXPECT_ISS=clockify
CLOCKIFY_JWT_EXPECT_AUD=rules
CLOCKIFY_JWT_LEEWAY_SECONDS=60
ADDON_FRAME_ANCESTORS='self' https://*.clockify.me https://*.clockify.com

# Middleware / networking
# ADDON_RATE_LIMIT=10
# ADDON_LIMIT_BY=workspace
# ADDON_CORS_ORIGINS=https://app.clockify.me
# ADDON_CORS_ALLOW_CREDENTIALS=true
# ADDON_REQUEST_LOGGING=false

# Local/dev helpers (DEV ONLY - never set in production)
# CLOCKIFY_WORKSPACE_ID=<your-workspace-id>  # DEV ONLY - never set in production
# CLOCKIFY_INSTALLATION_TOKEN=<token>        # DEV ONLY - never set in production
# ADDON_SKIP_SIGNATURE_VERIFY=true           # DEV ONLY - never set in production
